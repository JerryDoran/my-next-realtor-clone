(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[771],{4636:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var r=n(1664),s=n.n(r),i=n(4803),a=n.n(i),c=n(5434),o=n(9583),l=n(5893);function u(e){var t,n=e.id,r=e.listing,i=e.onEdit,u=e.onDelete;return(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)(s(),{href:"/category/".concat(r.type,"/").concat(n),children:(0,l.jsxs)("div",{className:"relative bg-white flex flex-col justify-between items-center shadow-md hover:shadow-xl rounded-md overflow-hidden transition-shadow duration-150 m-[10px] cursor-pointer",children:[(0,l.jsx)("img",{src:r.imgUrls[0],alt:"listing",loading:"lazy",className:"h-[170px] w-full object-cover hover:scale-105 transition-scale duration-200 ease-in"}),(0,l.jsx)(a(),{className:"absolute top-2 left-2 bg-[#3377cc] text-white uppercase text-xs font-semibold rounded-md px-2 py-1 shadow-lg",fromNow:!0,children:null===(t=r.timestamp)||void 0===t?void 0:t.toDate()}),(0,l.jsxs)("div",{className:"w-full p-[10px]",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,l.jsx)(c.$0r,{className:"h-5 w-5 text-green-600"}),(0,l.jsx)("p",{className:"font-semibold text-sm mb-[2px] text-gray-600 truncate",children:r.address})]}),(0,l.jsx)("p",{className:"font-semibold m-0 text-xl truncate",children:r.name}),(0,l.jsxs)("p",{className:"text-[#457b9d] mt-2 font-semibold",children:["$",null!==r&&void 0!==r&&r.offer?null===r||void 0===r?void 0:r.salePrice.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","):null===r||void 0===r?void 0:r.regularPrice.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),"rent"===(null===r||void 0===r?void 0:r.type)&&" / month"]}),(0,l.jsxs)("div",{className:"flex items-center mt-[10px] space-x-3",children:[(0,l.jsx)("div",{className:"flex items-center space-x-1",children:(0,l.jsx)("p",{className:"font-bold text-xs",children:r.bedrooms>1?"".concat(r.bedrooms," Beds"):"1 Bed"})}),(0,l.jsx)("div",{className:"flex items-center space-x-1",children:(0,l.jsx)("p",{className:"font-bold text-xs",children:r.bathrooms>1?"".concat(r.bathrooms," Baths"):"1 Bath"})})]})]})]})}),u&&(0,l.jsx)(o.Xm5,{className:"absolute bottom-4 right-4 h-[14px] text-red-700 cursor-pointer",onClick:function(){return u(n)}}),u&&(0,l.jsx)(c.zmo,{className:"absolute bottom-4 right-10 h-4 w-4 text-gray-800 cursor-pointer",onClick:function(){return i(n)}})]})}},6273:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(5893);function s(){return(0,r.jsx)("div",{className:"bg-black bg-opacity-50 flex items-center justify-center fixed left-0 right-0 bottom-0 top-0 z-50",children:(0,r.jsx)("div",{children:(0,r.jsx)("img",{src:"https://raw.githubusercontent.com/sahandghavidel/realtor-clone-react/b50f6a27f7608cd9a245725e86a48067a0f2368a/src/assets/svg/spinner.svg",alt:"loading",className:"w-24 h-24"})})})}},5801:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return w}});var r=n(9499),s=n(29),i=n(7794),a=n.n(i),c=n(8623),o=n(7294),l=n(3247),u=n(1163),d=n(2920),m=n(7908),x=n(6273),f=n(1872),p=n(1664),h=n.n(p),g=n(4636),b=n(5893);function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function w(){var e,t,n=(0,o.useState)(!1),i=n[0],p=n[1],v=(0,o.useState)([]),w=v[0],y=v[1],N=(0,o.useState)(!1),O=N[0],k=N[1],E=(0,o.useState)({name:null===c.I8||void 0===c.I8||null===(e=c.I8.currentUser)||void 0===e?void 0:e.displayName,email:null===c.I8||void 0===c.I8||null===(t=c.I8.currentUser)||void 0===t?void 0:t.email}),P=E[0],I=E[1],S=P.name,U=P.email,_=(0,u.useRouter)();if((0,o.useEffect)((function(){function e(){return e=(0,s.Z)(a().mark((function e(){var t,n,r,s,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,l.hJ)(c.db,"listings"),r=(0,l.IO)(n,(0,l.ar)("userRef","==",null===(t=c.I8.currentUser)||void 0===t?void 0:t.uid),(0,l.Xo)("timestamp","desc")),e.next=4,(0,l.PL)(r);case 4:s=e.sent,i=[],s.forEach((function(e){return i.push({id:e.id,data:e.data()})})),y(i),k(!1);case 9:case"end":return e.stop()}}),e)}))),e.apply(this,arguments)}c.I8.currentUser||_.push("/account/login"),function(){e.apply(this,arguments)}()}),[]),O)return(0,b.jsx)(x.Z,{});var C=function(e){I((function(t){return j(j({},t),{},(0,r.Z)({},e.target.name,e.target.value))}))},Z=function(){var e=(0,s.Z)(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,c.I8.currentUser.displayName===S){e.next=7;break}return e.next=4,(0,m.ck)(c.I8.currentUser,{displayName:S});case 4:return t=(0,l.JU)(c.db,"users",c.I8.currentUser.uid),e.next=7,(0,l.r7)(t,{name:S});case 7:d.Am.success("Profile successfully updated!"),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),d.Am.error("Could not update your profile details!"),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),D=function(){var e=(0,s.Z)(a().mark((function e(t){var n,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Are you sure you want to delete listing?")){e.next=7;break}return n=(0,l.JU)(c.db,"listings",t),e.next=4,(0,l.oe)(n);case 4:r=w.filter((function(e){return e.id!==t})),y(r),d.Am.success("Successfully deleted listing!");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,b.jsx)(b.Fragment,{children:(0,b.jsxs)("section",{className:"profileContainer",children:[(0,b.jsx)("h1",{className:"text-3xl text-center pt-8 font-semi-bold",children:"My Profile"}),(0,b.jsxs)("div",{className:"w-full mt-6 px-3 flex flex-col items-center justify-center",children:[(0,b.jsxs)("form",{className:"bg-white py-10 px-5 rounded-lg w-[350px] sm:w-[400px] md:w-[600px] flex flex-col relative",onSubmit:Z,children:[(0,b.jsx)("input",{type:"text",name:"name",className:"input transition ease-in-out w-full ".concat(i&&"bg-red-200 focus:bg-red-200"),placeholder:"Username",value:S,onChange:C,disabled:!i}),(0,b.jsx)("input",{type:"email",name:"email",className:"input transition ease-in-out w-full",placeholder:"Email",value:U,onChange:C,disabled:!0}),(0,b.jsxs)("div",{className:"w-full flex justify-between mt-4 text-sm sm:text-lg mb-6",children:[(0,b.jsx)("p",{className:" flex justify-between text-sm text-gray-500",children:"Do you want to change your name?"}),(0,b.jsx)("span",{className:"ml-2 text-sm text-red-400 cursor-pointer transition font-semibold hover:text-red-600",onClick:function(){i&&Z(),p((function(e){return!e}))},children:i?"Apply change":"Edit"})]}),(0,b.jsx)("p",{className:"absolute -top-1 right-6 text-sm cursor-pointer mt-4 text-blue-500 duration hover:text-blue-700",onClick:function(){c.I8.signOut(),_.push("/")},children:"Sign Out"})]}),(0,b.jsx)(h(),{href:"/create-listing",children:(0,b.jsxs)("button",{className:"text-sm w-[350px] sm:w-[400px] md:w-[600px] mt-6 mb-8 bg-black text-white py-4 font-medium shadow-md rounded-md transition hover:bg-gray-800 hover:shadow-lg flex items-center justify-center gap-2",type:"submit",children:[(0,b.jsx)(f.qHm,{className:"text-3xl bg-red-200 rounded-full p-1 border-2"}),"SELL OR RENT YOUR HOME"]})})]}),(0,b.jsx)("div",{className:"mt-8 max-w-6xl px-3 mx-auto",children:!O&&w.length>0&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("h2",{className:"text-2xl text-center font-semibold mb-6",children:"My Listings"}),(0,b.jsx)("div",{className:"sm:grid grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5",children:w.map((function(e){return(0,b.jsx)(g.Z,{id:e.id,listing:e.data,onDelete:function(){return D(e.id)},onEdit:function(){return t=e.id,void _.push("/edit-listing/".concat(t));var t}},e.id)}))})]})})]})})}},3469:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/account/profile",function(){return n(5801)}])}},function(e){e.O(0,[445,228,994,885,679,774,888,179],(function(){return t=3469,e(e.s=t);var t}));var t=e.O();_N_E=t}]);