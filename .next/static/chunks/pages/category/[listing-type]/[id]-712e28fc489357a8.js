(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[714],{6273:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(5893);function o(){return(0,r.jsx)("div",{className:"bg-black bg-opacity-50 flex items-center justify-center fixed left-0 right-0 bottom-0 top-0 z-50",children:(0,r.jsx)("div",{children:(0,r.jsx)("img",{src:"https://raw.githubusercontent.com/sahandghavidel/realtor-clone-react/b50f6a27f7608cd9a245725e86a48067a0f2368a/src/assets/svg/spinner.svg",alt:"loading",className:"w-24 h-24"})})})}},7439:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return L}});var r=n(29),o=n(7794),s=n.n(o),a=n(7294),c=n(1163),i=n(3247),l=n(8623),u=n(6273),d=n(719),f=n(8116),p=(n(2821),n(9583)),m=n(2920),x=n(5893);function h(e){var t=e.userRef,n=e.listing,o=(0,a.useState)(null),c=o[0],u=o[1],d=(0,a.useState)(""),f=d[0],p=d[1];(0,a.useEffect)((function(){function e(){return(e=(0,r.Z)(s().mark((function e(){var n,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,i.JU)(l.db,"users",t),e.next=3,(0,i.QT)(n);case 3:(r=e.sent).exists()?u(r.data()):m.Am.error("Could not get landlord info!");case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[t]);return(0,x.jsx)(x.Fragment,{children:(null===c||void 0===c?void 0:c.email)&&(0,x.jsxs)("div",{className:"flex flex-col w-full",children:[(0,x.jsxs)("p",{children:["Contact ",c.name," for the ",n.name.toLowerCase()]}),(0,x.jsx)("div",{className:"mt-3 mb-6",children:(0,x.jsx)("textarea",{name:"message",id:"message",rows:"2",value:f,onChange:function(e){p(e.target.value)},className:"w-full px-4 py-2 text-xl text-gray-700 bg-white border border-gray-300 rounded transition duration-150 ease-in-out focus:text-gray-700 focus:bg-white focus:border-slate-600"})}),(0,x.jsx)("a",{href:"mailto:".concat(c.email,"?Subject=").concat(n.name,"&body=").concat(f),children:(0,x.jsx)("button",{className:"px-7 py-3 bg-blue-600 text-white rounded text-sm uppercase shadow-md hover:bg-blue-700 hover:shadow-lg focus:bg-blue-700 focus:shadow-lg active:bg-blue-800 active:shadow-lg transition duration-150 ease-in-out w-full text-center mb-6",type:"button",children:"Send Message"})})]})})}const g=(0,a.createContext)(null),b=g.Provider;function v(){const e=(0,a.useContext)(g);if(null==e)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return e}var w=n(5243);function y(){return y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},y.apply(this,arguments)}function j({bounds:e,boundsOptions:t,center:n,children:r,className:o,id:s,placeholder:c,style:i,whenReady:l,zoom:u,...d},f){const[p]=(0,a.useState)({className:o,id:s,style:i}),[m,x]=(0,a.useState)(null);(0,a.useImperativeHandle)(f,(()=>m?.map??null),[m]);const h=(0,a.useCallback)((r=>{if(null!==r&&null===m){const o=new w.Map(r,d);null!=n&&null!=u?o.setView(n,u):null!=e&&o.fitBounds(e,t),null!=l&&o.whenReady(l),x(function(e){return Object.freeze({__version:1,map:e})}(o))}}),[]);(0,a.useEffect)((()=>()=>{m?.map.remove()}),[m]);const g=m?a.createElement(b,{value:m},r):c??null;return a.createElement("div",y({},p,{ref:h}),g)}const N=(0,a.forwardRef)(j);var O=n(3935);function C(e,t,n){return Object.freeze({instance:e,context:t,container:n})}function E(e,t){return null==t?function(t,n){const r=(0,a.useRef)();return r.current||(r.current=e(t,n)),r}:function(n,r){const o=(0,a.useRef)();o.current||(o.current=e(n,r));const s=(0,a.useRef)(n),{instance:c}=o.current;return(0,a.useEffect)((function(){s.current!==n&&(t(c,n,s.current),s.current=n)}),[c,n,r]),o}}function P(e,t){const n=(0,a.useRef)(t);(0,a.useEffect)((function(){t!==n.current&&null!=e.attributionControl&&(null!=n.current&&e.attributionControl.removeAttribution(n.current),null!=t&&e.attributionControl.addAttribution(t)),n.current=t}),[e,t])}function k(e,t){const n=(0,a.useRef)();(0,a.useEffect)((function(){return null!=t&&e.instance.on(t),n.current=t,function(){null!=n.current&&e.instance.off(n.current),n.current=null}}),[e,t])}function z(e,t){const n=e.pane??t.pane;return n?{...e,pane:n}:e}function S(e){return function(t){const n=v(),r=e(z(t,n),n);return P(n.map,t.attribution),k(r.current,t.eventHandlers),function(e,t){(0,a.useEffect)((function(){return(t.layerContainer??t.map).addLayer(e.instance),function(){t.layerContainer?.removeLayer(e.instance),t.map.removeLayer(e.instance)}}),[t,e])}(r.current,n),r}}const R=function(e){function t(t,n){const{instance:r}=e(t).current;return(0,a.useImperativeHandle)(n,(()=>r)),null}return(0,a.forwardRef)(t)}(S(E((function({url:e,...t},n){return C(new w.TileLayer(e,z(t,n)),n)}),(function(e,t,n){!function(e,t,n){const{opacity:r,zIndex:o}=t;null!=r&&r!==n.opacity&&e.setOpacity(r),null!=o&&o!==n.zIndex&&e.setZIndex(o)}(e,t,n);const{url:r}=t;null!=r&&r!==n.url&&e.setUrl(r)}))));const _=function(e,t){return function(e){function t(t,n){const{instance:r,context:o}=e(t).current;return(0,a.useImperativeHandle)(n,(()=>r)),null==t.children?null:a.createElement(b,{value:o},t.children)}return(0,a.forwardRef)(t)}(S(E(e,t)))}((function({position:e,...t},n){const r=new w.Marker(e,t);return C(r,(o=n,s={overlayContainer:r},Object.freeze({...o,...s})));var o,s}),(function(e,t,n){t.position!==n.position&&e.setLatLng(t.position),null!=t.icon&&t.icon!==n.icon&&e.setIcon(t.icon),null!=t.zIndexOffset&&t.zIndexOffset!==n.zIndexOffset&&e.setZIndexOffset(t.zIndexOffset),null!=t.opacity&&t.opacity!==n.opacity&&e.setOpacity(t.opacity),null!=e.dragging&&t.draggable!==n.draggable&&(!0===t.draggable?e.dragging.enable():e.dragging.disable())})),I=function(e,t){const n=function(e,t){return function(n,r){const o=v(),s=e(z(n,o),o);return P(o.map,n.attribution),k(s.current,n.eventHandlers),t(s.current,o,n,r),s}}(E(e),t);return function(e){function t(t,n){const[r,o]=(0,a.useState)(!1),{instance:s}=e(t,o).current;(0,a.useImperativeHandle)(n,(()=>s)),(0,a.useEffect)((function(){r&&s.update()}),[s,r,t.children]);const c=s._contentNode;return c?(0,O.createPortal)(t.children,c):null}return(0,a.forwardRef)(t)}(n)}((function(e,t){return C(new w.Popup(e,t.overlayContainer),t)}),(function(e,t,{position:n},r){(0,a.useEffect)((function(){const{instance:o}=e;function s(e){e.popup===o&&(o.update(),r(!0))}function a(e){e.popup===o&&r(!1)}return t.map.on({popupopen:s,popupclose:a}),null==t.overlayContainer?(null!=n&&o.setLatLng(n),o.openOn(t.map)):t.overlayContainer.bindPopup(o),function(){t.map.off({popupopen:s,popupclose:a}),t.overlayContainer?.unbindPopup(),t.map.removeLayer(o)}}),[e,t,r,n])}));function L(){var e,t,n,o=(0,a.useState)(null),m=o[0],g=o[1],b=(0,a.useState)(!0),v=b[0],w=b[1],y=(0,a.useState)(!1),j=y[0],O=y[1],C=(0,a.useState)(!1),E=C[0],P=C[1],k=(0,c.useRouter)().query.id;return f.ZP.use([f.pt,f.W_,f.tl]),(0,a.useEffect)((function(){function e(){return(e=(0,r.Z)(s().mark((function e(){var t,n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,i.JU)(l.db,"listings",k),e.next=3,(0,i.QT)(t);case 3:(n=e.sent).exists()&&(g(n.data()),w(!1));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),v?(0,x.jsx)(u.Z,{}):(0,x.jsxs)("main",{children:[(0,x.jsx)(d.tq,{slidesPerView:1,navigation:!0,pagination:{type:"progressbar"},effect:"fade",modules:[f.xW],autoplay:{delay:3e3},children:m.imgUrls.map((function(e,t){return(0,x.jsx)(d.o5,{children:(0,x.jsx)("div",{className:"relative w-full overflow-hidden h-[300px]",style:{background:"url(".concat(m.imgUrls[t],") center no-repeat"),backgroundSize:"cover"}})},t)}))}),(0,x.jsx)("div",{className:"fixed top-[13%] right-[3%] z-10 bg-white cursor-pointer border-2 border-gray-400 rounded-full w-12 h-12 flex justify-center items-center",onClick:function(){navigator.clipboard.writeText(window.location.href),O(!0),setTimeout((function(){O(!1)}),2e3)},children:(0,x.jsx)(p.Lrt,{className:"text-lg text-slate-500"})}),j&&(0,x.jsx)("p",{className:"fixed top-[23%] right-[5%] font-semibold border-2 border-gray-400 rounded-md bg-white z-10 p-2",children:"Link Copied"}),(0,x.jsxs)("div",{className:"m-4 p-4 rounded-lg shadow-lg bg-white flex flex-col max-w-7xl lg:mx-auto lg:space-x-8 md:flex-row",children:[(0,x.jsxs)("div",{className:"w-full",children:[(0,x.jsxs)("p",{className:"text-xl font-bold mb-3 text-blue-900",children:[m.name," - $",m.offer?m.salePrice.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","):m.regularPrice.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),"rent"===m.type?" / month":""]}),(0,x.jsxs)("p",{className:"flex items-center mt-6 mb-5 font-semibold",children:[(0,x.jsx)(p.Nh4,{className:"h-5 w-5 text-green-600 mr-1"}),m.address]}),(0,x.jsxs)("div",{className:"flex justify-start items-center space-x-4 w-[90%] mb-5",children:[(0,x.jsx)("p",{className:"bg-red-800 w-full max-w-[200px] rounded-2xl p-1 text-white text-sm text-center font-semibold shadow-md",children:"rent"===m.type?"Rent":"Sale"}),m.offer&&(0,x.jsxs)("p",{className:"w-full max-w-[200px] bg-green-800 rounded-2xl p-1 text-white text-sm text-center font-semibold shadow-md",children:["$",(m.regularPrice-m.salePrice).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")," ","discount"]})]}),(0,x.jsxs)("p",{className:"mt-3 mb-3 text-sm md:max-w-[80%]",children:["Description -"," ",(0,x.jsx)("span",{className:"font-semibold",children:m.description})]}),(0,x.jsxs)("ul",{className:"flex items-center space-x-4 sm:space-x-5 text-sm font-semibold mb-6 w-[90%]",children:[(0,x.jsxs)("li",{className:"flex items-center whitespace-nowrap",children:[(0,x.jsx)(p.f0S,{className:"text-lg mr-1"}),+m.bedrooms>1?"".concat(m.bedrooms," Beds"):"1 Bed"]}),(0,x.jsxs)("li",{className:"flex items-center whitespace-nowrap",children:[(0,x.jsx)(p.MvV,{className:"text-lg mr-1"}),+m.bathrooms>1?"".concat(m.bathrooms," Baths"):"1 Bath"]}),(0,x.jsxs)("li",{className:"flex items-center whitespace-nowrap",children:[(0,x.jsx)(p.mxg,{className:"text-lg mr-1"}),m.parking?"Parking spot":"No Parking"]}),(0,x.jsxs)("li",{className:"flex items-center whitespace-nowrap",children:[(0,x.jsx)(p.O5m,{className:"text-lg mr-1"}),m.furnished?"Furnished":"Not furnished"]})]}),m.userRef===(null===(e=l.I8.currentUser)||void 0===e?void 0:e.uid)&&!E&&(0,x.jsx)("div",{className:"mt-6",children:(0,x.jsx)("button",{className:"px-7 py-3 bg-black text-white font-medium text-sm uppercase rounded shadow-md transition hover:bg-gray-900 hover:shadow-lg focus:bg-gray-700 focus:shadow-lg w-full",onClick:function(){return P(!0)},children:"Contact Landlord"})}),E&&(0,x.jsx)(h,{userRef:m.userRef,listing:m})]}),(0,x.jsx)("div",{className:"w-full h-[200px] md:h-[400px] md:mt-0 z-10 overflow-x-hidden mt-6 md:ml-2",children:(0,x.jsxs)(N,{center:[m.geolocation.lat,m.geolocation.lng],zoom:13,scrollWheelZoom:!1,style:{height:"100%",width:"100%"},children:[(0,x.jsx)(R,{attribution:'\xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),(0,x.jsx)(_,{position:[null===(t=m.geolocation)||void 0===t?void 0:t.lat,null===(n=m.geolocation)||void 0===n?void 0:n.lng],children:(0,x.jsx)(I,{children:m.address})})]})})]})]})}},6720:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/category/[listing-type]/[id]",function(){return n(7439)}])},8357:function(e,t,n){"use strict";n.d(t,{w_:function(){return l}});var r=n(7294),o={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},s=r.createContext&&r.createContext(o),a=function(){return a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},a.apply(this,arguments)},c=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};function i(e){return e&&e.map((function(e,t){return r.createElement(e.tag,a({key:t},e.attr),i(e.child))}))}function l(e){return function(t){return r.createElement(u,a({attr:a({},e.attr)},t),i(e.child))}}function u(e){var t=function(t){var n,o=e.attr,s=e.size,i=e.title,l=c(e,["attr","size","title"]),u=s||t.size||"1em";return t.className&&(n=t.className),e.className&&(n=(n?n+" ":"")+e.className),r.createElement("svg",a({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,o,l,{className:n,style:a(a({color:e.color||t.color},t.style),e.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),i&&r.createElement("title",null,i),e.children)};return void 0!==s?r.createElement(s.Consumer,null,(function(e){return t(e)})):t(o)}},29:function(e,t,n){"use strict";function r(e,t,n,r,o,s,a){try{var c=e[s](a),i=c.value}catch(l){return void n(l)}c.done?t(i):Promise.resolve(i).then(r,o)}function o(e){return function(){var t=this,n=arguments;return new Promise((function(o,s){var a=e.apply(t,n);function c(e){r(a,o,s,c,i,"next",e)}function i(e){r(a,o,s,c,i,"throw",e)}c(void 0)}))}}n.d(t,{Z:function(){return o}})}},function(e){e.O(0,[445,269,628,774,888,179],(function(){return t=6720,e(e.s=t);var t}));var t=e.O();_N_E=t}]);